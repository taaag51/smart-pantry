# スマートパントリーシステム - プロジェクト概要

## プロジェクト構成

### バックエンド (Go)

```
go-rest-api/
├── controller/      # HTTPリクエストハンドリング
├── usecase/        # ビジネスロジック
├── repository/     # データアクセス層
├── model/          # ドメインモデル
├── services/       # 外部サービス連携
├── validator/      # バリデーションロジック
└── router/         # ルーティング設定
```

### フロントエンド (React)

```
react-app/
├── src/
│   ├── components/   # UIコンポーネント
│   ├── hooks/        # カスタムフック
│   ├── pages/        # ページコンポーネント
│   ├── store/        # 状態管理
│   └── types/        # 型定義
```

### CI/CD

GitHub Actions を使用して、以下の自動化を実現しています：

- プッシュ時のユニットテスト実行（バックエンド・フロントエンド）
- テストカバレッジレポートの自動生成
- Artifact を使用したビルド成果物の保存（v4）

詳細は `.github/workflows/test.yml` を参照してください。

注意：GitHub Actions artifact のアップロード/ダウンロードには actions/upload-artifact@v4 および actions/download-artifact@v4 を使用しています（2025 年 1 月 30 日の v3 非推奨化対応済み）。

## 現状の課題

### バックエンド

1. コントローラー層の重複

   - エラーハンドリングの重複
   - バリデーションロジックの散在
   - JWT トークン検証の重複

2. ユースケース層の課題

   - エラー型の一貫性不足
   - ビジネスロジックの境界が不明確

3. リポジトリ層の課題

   - エラーハンドリングの一貫性不足
   - クエリ結果の型安全性

4. 共通課題
   - ドキュメンテーション不足
   - テストカバレッジの向上余地

### フロントエンド

1. コンポーネント設計

   - 共通 UI コンポーネントの抽出余地
   - プロップドリリングの発生

2. 状態管理

   - グローバルステートの整理
   - エラーハンドリングの一貫性

3. API 通信
   - エラーハンドリングの統一
   - ローディング状態の管理

## 改善方針

1. アーキテクチャの整理

   - クリーンアーキテクチャの原則に従った責務の明確化
   - 依存関係の整理と依存性注入の導入

2. コードの共通化

   - ミドルウェアの整理（認証、ログ、エラーハンドリング）
   - 共通コンポーネントの抽出
   - 型定義の統一

3. ドキュメント整備

   - アーキテクチャ図の作成
   - API 仕様書の整備
   - セットアップガイドの作成

4. テスト強化
   - ユニットテストの拡充
   - インテグレーションテストの追加
   - E2E テストの検討

## 次のステップ

1. バックエンドのリファクタリング

   - エラーハンドリングの統一
   - ミドルウェアの整理
   - バリデーションの共通化

2. フロントエンドの改善

   - 共通コンポーネントの抽出
   - カスタムフックの整理
   - 型定義の強化

3. ドキュメント作成
   - アーキテクチャ図の作成
   - API 仕様書の作成
   - セットアップガイドの整備
